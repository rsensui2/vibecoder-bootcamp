---
title: "デプロイとは？- アプリを世界に公開するということ"
track: "ライト版・第4回"
author: "TEKION Group / 泉水亮介"
last_updated: "2025年7月15日"
category: "デプロイ"
---

# 4-1 デプロイとは？- アプリを世界に公開するということ

## 概要
これまでの開発は、すべてあなたのPCの中（ローカル環境）で行われてきました。この章では、開発したアプリケーションを世界中の誰もがアクセスできるようにする「デプロイ」というプロセスについて学びます。特に、開発時と本番時でのコマンドの違いや、その背景にある「ビルド」の重要性を理解します。

## 学習目標
- 「デプロイ」の基本的な概念を理解する。
- `npm run dev`（開発モード）と`npm run build`（本番モード）の目的と違いを説明できる。
- なぜ「ビルド」という工程が必要なのか、その理由（最適化など）を理解する。
- デプロイ前にローカルでビルドを試すことの重要性を認識する。

## 開発モードと本番モード：厨房での試作とお客様への提供

これまで私たちは `npm run dev` というコマンドで開発サーバーを起動してきました。これは、いわばレストランの厨房で新しいメニューを試作している状態です。

| 項目 | `npm run dev` (開発モード) | `npm run build` (本番モード) |
| :--- | :--- | :--- |
| **目的** | 開発者が効率よく作業するため | ユーザーが快適にアプリを使うため |
| **状態** | **厨房での試作** | **お客様への提供料理** |
| **特徴** | - 変更が即座に反映される (ホットリロード)<br>- デバッグ情報が豊富<br>- 動作は遅く、ファイルサイズも大きい | - コードが圧縮・最適化されている<br>- 不要なデータは削除<br>- 動作は非常に高速で、ファイルサイズも小さい |

`npm run dev` は、料理人が最高の味を求めて何度も味見や調整をするための、機能満載の実験室です。しかし、その分、余計な道具や食材が散らかっており、お客様にそのまま出すには適していません。

一方、`npm run build` は、完成したレシピに基づき、最高の料理を最も効率的かつ美しい形でお客様に提供するためのプロセスです。無駄を削ぎ落とし、洗練された一皿を準備する作業に相当します。

## なぜ「ビルド」が必要なのか？

`npm run build` コマンドを実行すると、Next.jsは `src` や `app` ディレクトリにある私たちのコードを、ブラウザが最も効率的に解釈できる形式に変換・最適化します。このプロセスを「ビルド」と呼びます。

ビルドが行う主な仕事は以下の通りです。

1.  **コードの変換（トランスパイル）**:
    - TypeScriptや最新のJavaScript構文を、古いブラウザでも理解できるJavaScriptに変換します。これにより、より多くのユーザーが問題なくアプリを利用できます。

2.  **コードの圧縮（Minify）**:
    - コード内の不要なスペース、改行、コメントなどを削除し、変数名を短いものに置き換えることで、ファイルサイズを劇的に小さくします。ファイルが小さいほど、ダウンロードが速くなります。

3.  **ファイルの結合（Bundling）**:
    - 複数のJavaScriptやCSSファイルを一つにまとめることで、ブラウザがサーバーにリクエストする回数を減らし、表示速度を向上させます。

4.  **最適化**:
    - 画像をWebPのようなモダンな形式に変換して軽量化したり、使われていないコードを自動的に削除したりと、パフォーマンスを向上させるための様々な最適化を行います。

これらの処理を経て生成された、最適化済みのファイル群が格納されるのが `.next` ディレクトリです。私たちがデプロイする際は、この `.next` ディレクトリの中身をサーバーに配置することになります。

## 最重要原則：「ローカルでビルドできなければ、本番でもビルドできない」

Vercelのようなモダンなホスティングサービスは、GitHubからソースコードを受け取ると、そのサーバー上で `npm run build` を実行してくれます。

ここで重要なのは、**もしあなたのPC（ローカル環境）で `npm run build` コマンドがエラーになる場合、Vercelのサーバー上でも100%エラーになる**ということです。

デプロイでエラーが発生すると、原因の特定が難しくなることがあります。そのため、**GitHubにプッシュする直前に、必ず手元で `npm run build` を実行し、エラーが出ないことを確認する**習慣をつけることが、スムーズな開発の秘訣です。

```bash
# 開発を終え、GitHubにプッシュする前に…

# 1. まずはローカルでビルドを試す
npm run build

# "Build successful" と表示されればOK！

# 2. エラーがなければ、いつも通りコミットしてプッシュ
git add .
git commit -m "feat: 新機能の追加とビルド確認"
git push
```

この一手間が、未来のあなたを多くのトラブルから救ってくれます。

## 次のステップ
デプロイとビルドの概念を理解したところで、いよいよ次の章では、Vercelを使って実際にアプリケーションをインターネットに公開する手順をハンズオンで学んでいきましょう。