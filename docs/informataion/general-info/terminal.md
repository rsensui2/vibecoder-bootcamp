# ターミナル操作ガイド

**最終更新日**: 2025-12-18

## 目次
- [基本概念](#基本概念)
- [ターミナルの現在地を確認する](#ターミナルの現在地を確認する)
- [Cursorでターミナルを開く方法](#cursorでターミナルを開く方法)
- [よく使う基本操作](#よく使う基本操作)
- [よく使う基本コマンド](#よく使う基本コマンド)
- [npm/pnpm/yarnコマンド](#npmpnpmyarnコマンド)
- [Gitコマンド](#gitコマンド)
- [エラーメッセージをチャットに送る](#エラーメッセージをチャットに送る)
- [トラブルシューティング](#トラブルシューティング)

---

## 基本概念

### ターミナルとは
- コンピュータに文字（コマンド）で指示を出すツール
- GUIの代わりにキーボードで操作
- プログラミングでは必須のツール

### カレントディレクトリ
- **カレントディレクトリ**: 現在いる場所（フォルダ）
- コマンドは基本的にカレントディレクトリで実行される
- `pwd`コマンドで現在地を確認できる

### パス
- **絶対パス**: ルート（最上位）からの完全な場所
  - 例: `/Users/username/project/app`
- **相対パス**: 現在地からの相対的な場所
  - 例: `./src/components` (現在地の中のsrc/components)
  - 例: `../config` (一つ上の階層のconfig)

---

## ターミナルの現在地を確認する

### なぜ現在地が重要なのか

ターミナルでコマンドを実行するとき、**どのフォルダにいるか**が非常に重要です。

特に重要なのは、**アプリのルートディレクトリ**（`package.json` があるフォルダ）で実行する必要があるコマンドです。

例えば：
- `npm run dev` → アプリのルートディレクトリで実行
- `npm install` → アプリのルートディレクトリで実行
- `git` コマンド → プロジェクトフォルダ（Gitリポジトリのルート）で実行

**重要**: Cursor で開いている「プロジェクトフォルダ」と、コマンドを実行すべき「アプリのルートディレクトリ」は同じとは限りません。詳しくは「[今更聞けないシリーズ - プロジェクトフォルダとアプリのルートディレクトリの違い](./今更聞けないシリーズ.md#プロジェクトフォルダとアプリのルートディレクトリの違い)」を参照してください。

### 現在地の確認方法

#### 方法1: プロンプトを見る

ターミナルを開くと、通常は現在地がプロンプトに表示されています：

```bash
username@MacBook my-next-app %
```

この例では、`my-next-app` フォルダにいることが分かります。

#### 方法2: `pwd` コマンド

プロンプトだけでは分かりにくい場合、`pwd`（Print Working Directory）コマンドで現在地の完全なパスを確認できます：

```bash
pwd
# 出力例: /Users/username/projects/my-project/frontend
```

### アプリのルートディレクトリにいるか確認

**最も重要**: コマンドを実行する前に、アプリのルートディレクトリにいるか確認しましょう。

`ls` コマンドでファイル一覧を表示し、`package.json` があることを確認します：

```bash
ls
# 出力例:
# app/  components/  node_modules/  package.json  public/  ...
```

#### `package.json` が表示されない場合

以下のいずれかの可能性があります：

1. **まだプロジェクトフォルダ全体にいる**（複数アプリ構造の場合）
   ```bash
   ls
   # 出力例: docs/  frontend/  backend/  README.md
   ```
   → `cd frontend` などでアプリのフォルダに移動

2. **アプリのサブフォルダにいる**
   ```bash
   pwd
   # 出力例: /Users/username/projects/my-app/src/components
   ```
   → `cd ../..` で上の階層に移動するか、`cd /path/to/app` で直接移動

### 正しいフォルダへの移動方法

#### パターン1: シンプルな構造
Cursorでプロジェクトを開いたとき、ターミナルもアプリのルートディレクトリで開くので、そのままコマンド実行可能。

```bash
# ターミナルを開いた直後
pwd
# /Users/username/projects/my-next-app

ls
# package.json がある → OK！

npm run dev  # そのまま実行
```

#### パターン2: 複数アプリ構造
Cursorでプロジェクト全体を開いている場合、アプリのルートディレクトリに移動が必要。

```bash
# ターミナルを開いた直後
pwd
# /Users/username/projects/my-project

ls
# docs/  frontend/  backend/  README.md  ← package.json がない

cd frontend  # アプリのルートディレクトリに移動

ls
# package.json がある → OK！

npm run dev  # 実行
```

---

## Cursorでターミナルを開く方法

Cursorには統合ターミナルがあり、エディター内でコマンドを実行できます。

### ターミナルの表示/非表示

**`Cmd + J`**（Mac）または **`Ctrl + J`**（Windows）で、ターミナルの表示・非表示を切り替えられます。

画面を広く使いたいときは非表示にし、コマンドを実行するときに表示します。

### 特定のフォルダでターミナルを開く

ターミナルを開いたとき、どのフォルダで開くかを指定できます。

#### 方法1: `cd` コマンドで移動

```bash
# プロジェクトフォルダに移動
cd /Users/username/projects/my-next-app

# または相対パスで
cd my-next-app
```

#### 方法2: Cursorの機能を使う（おすすめ）

1. 左側のファイルツリーで、目的のフォルダを右クリック
2. **「統合ターミナルで開く」** を選択
3. そのフォルダで新しいターミナルが開く

この方法なら、確実に正しいフォルダでターミナルを開けます。特に、プロジェクトのルートディレクトリを右クリックして開けば、`npm run dev` などのコマンドをすぐに実行できます。

### ターミナルは複数開ける

ターミナルは複数のタブで開くことができます。ターミナルペイン右上の **「+」ボタン** をクリックすると、新しいターミナルが開きます。

不要なターミナルは、タブの **「×」ボタン** で閉じることができます。使っていないターミナルは適宜削除して、整理整頓しましょう。

---

## よく使う基本操作

### 実行中のコマンドを停止する

開発サーバー（`npm run dev` など）を起動している状態で、それを止めたいときは：

**`Ctrl + C`**

- Macでも **`Ctrl + C`** です（`Cmd` ではありません）
- Windowsでも **`Ctrl + C`** です（コピーと同じキーですが、ターミナルでは「停止」の意味になります）

これで、現在実行中のプロセスが終了します。

### 前に実行したコマンドを呼び出す

同じコマンドを何度も打つのは面倒です。**矢印キーの `↑`（上）** を押すと、前に実行したコマンドが表示されます。

```bash
# 1回目
npm run dev

# 2回目以降
# ↑キーを押すだけで "npm run dev" が表示される
# Enterで実行
```

何度も `↑` を押すと、さらに前のコマンドまで遡れます。`↓` で戻ることもできます。

### ターミナルをクリアする

ターミナルに古いログやエラーメッセージがたくさん表示されていると、最新の情報が見づらくなります。

**`clear` コマンド** で画面をクリア：

```bash
clear
```

これでターミナルの表示内容がすべて消え、スッキリします。

### よくやる操作の流れ（バグ修正後）

1. コードを修正
2. **`Ctrl + C`** でサーバーを停止
3. **`clear`** でターミナルをクリア
4. **`npm run dev`** でサーバーを再起動
5. ブラウザで動作確認

この流れを覚えておくと、スムーズに開発できます。

---

## よく使う基本コマンド

### ディレクトリ操作

```bash
# 現在のディレクトリを表示
pwd

# ディレクトリの中身を表示
ls

# 詳細表示（隠しファイルも含む）
ls -la

# ディレクトリ移動
cd フォルダ名

# 一つ上の階層に移動
cd ..

# ホームディレクトリに移動
cd ~

# 直前のディレクトリに戻る
cd -
```

### ファイル/フォルダ操作

```bash
# フォルダ作成
mkdir フォルダ名

# ファイル作成
touch ファイル名

# ファイルの内容を表示
cat ファイル名

# ファイル/フォルダをコピー
cp コピー元 コピー先

# ファイル/フォルダを移動（リネーム）
mv 移動元 移動先

# ファイル/フォルダを削除
rm ファイル名
rm -rf フォルダ名  # フォルダごと削除（注意！）
```

### その他

```bash
# コマンド履歴を表示
history

# 画面をクリア
clear
# または Ctrl + L

# 実行中のコマンドを停止
# Ctrl + C

# コマンドのヘルプを表示
コマンド名 --help
```

---

## npm/pnpm/yarnコマンド

### 重要な注意点
- **必ずプロジェクトのルートディレクトリで実行する**
- `package.json`があるディレクトリで実行
- 間違った場所で実行するとエラーになる

### よく使うコマンド

#### プロジェクトのセットアップ

```bash
# 依存関係のインストール（初回またはclone後）
npm install
# または
pnpm install
# または
yarn install
```

#### 開発サーバーの起動

```bash
# 開発サーバーを起動（Next.jsなど）
npm run dev
# または
pnpm dev
# または
yarn dev

# 実行後、通常 http://localhost:3000 でアクセス可能
```

##### `npm run dev` とは何をしているのか

`npm run dev` は、開発用のローカルサーバーを起動するコマンドです。このコマンドを実行すると：

1. **開発サーバーが起動する**
   - Next.jsアプリケーションがあなたのパソコン上で動き始めます
   - コードの変更を監視し、自動でリロードします（Hot Reload）

2. **ポート3000で待機**
   - 通常、`http://localhost:3000` でアクセスできるようになります
   - `localhost` = あなたのパソコン自身
   - `3000` = ポート番号（サーバーの入り口のようなもの）

3. **ターミナルに表示されるメッセージ**
   ```bash
   ➜  Local:   http://localhost:3000
   ➜  Network: http://192.168.x.x:3000
   ✓ Ready in 2.3s
   ```
   このような表示が出れば、起動成功です。

##### ブラウザでアクセスする方法

1. **自動で開く場合**
   - 多くの場合、`npm run dev` 実行後に自動でブラウザが開きます

2. **手動で開く場合**
   - ブラウザを起動
   - アドレスバーに `http://localhost:3000` を入力
   - Enterキーを押す

3. **ターミナルのリンクをクリック**
   - ターミナルに表示された `http://localhost:3000` をクリック
   - （多くのターミナルではクリック可能になっています）

##### サーバーが起動している状態とは

`npm run dev` を実行すると、ターミナルは以下のような状態になります：

```bash
npm run dev

> my-app@0.1.0 dev
> next dev

  ▲ Next.js 14.0.0
  - Local:        http://localhost:3000

 ✓ Ready in 1.5s
```

**この状態では**:
- カーソルが点滅せず、コマンドを入力できない
- これは正常な状態です（サーバーが動いている証拠）
- **`Ctrl + C` を押すまで、このターミナルでは他のコマンドを実行できません**

**別のコマンドを実行したい場合**:
- 新しいターミナルタブを開く（ターミナルペイン右上の「+」ボタン）
- または、サーバーを一時的に停止（`Ctrl + C`）

##### よくある質問

**Q: ポート3000が既に使われているというエラーが出る**
```bash
Error: Port 3000 is already in use
```

**A: 対処法**
1. 別のターミナルで既に `npm run dev` が実行されていないか確認
2. 他のアプリがポート3000を使っている可能性（別のプロセスを終了）
3. または別のポートで起動: `PORT=3001 npm run dev`

**Q: ブラウザに何も表示されない**

**A: 確認すること**
1. ターミナルに「Ready」と表示されているか
2. URLが `http://localhost:3000` で正しいか（`https`ではなく`http`）
3. エラーメッセージがターミナルに出ていないか

#### パッケージの追加/削除

```bash
# パッケージをインストール
npm install パッケージ名
pnpm add パッケージ名
yarn add パッケージ名

# 開発用パッケージをインストール
npm install -D パッケージ名
pnpm add -D パッケージ名
yarn add -D パッケージ名

# パッケージを削除
npm uninstall パッケージ名
pnpm remove パッケージ名
yarn remove パッケージ名
```

#### ビルドとデプロイ

```bash
# プロダクションビルド
npm run build
pnpm build
yarn build

# ビルド後のアプリを起動
npm start
pnpm start
yarn start
```

### package.jsonのscriptsセクション

`package.json`に定義されたコマンドを実行：

```bash
npm run スクリプト名
pnpm スクリプト名
yarn スクリプト名
```

例：
```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint"
  }
}
```

---

## Gitコマンド

### 基本的なワークフロー

```bash
# 現在の状態を確認
git status

# 変更をステージング（追加）
git add .              # すべての変更を追加
git add ファイル名      # 特定ファイルのみ追加

# コミット（変更を記録）
git commit -m "コミットメッセージ"

# リモートにプッシュ（アップロード）
git push

# リモートから最新を取得
git pull
```

### ブランチ操作

```bash
# ブランチ一覧を表示
git branch

# 新しいブランチを作成
git branch ブランチ名

# ブランチを切り替え
git checkout ブランチ名

# ブランチを作成して切り替え（よく使う）
git checkout -b ブランチ名

# ブランチを削除
git branch -d ブランチ名
```

### その他便利なコマンド

```bash
# 変更内容を確認
git diff

# コミット履歴を確認
git log
git log --oneline  # 簡潔表示

# 特定ファイルの変更を取り消す
git checkout -- ファイル名

# 直前のコミットを取り消す（慎重に！）
git reset --soft HEAD^
```

---

## エラーメッセージをチャットに送る

バグが起きたとき、エラーメッセージをAIエージェントに見せると解決策を提案してくれます。しかし、古いエラーが残っていると、AIが混乱して間違った解決策を提案する可能性があります。

### 推奨される手順

#### 1. ターミナルをクリーンな状態にする

```bash
# 1. 実行中のサーバーを停止
Ctrl + C

# 2. 古いログを削除
clear

# 3. サーバーを再起動
npm run dev
```

#### 2. エラーが再現されるか確認

サーバーを再起動した後、ブラウザで同じ操作をして、エラーが再現されるか確認します。

#### 3. エラーメッセージをチャットに送る

##### 方法1: 全選択して追加

1. ターミナル内をクリックしてアクティブにする
2. **`Cmd + A`**（Mac）または **`Ctrl + A`**（Windows）でターミナル内容を全選択
3. **`Cmd + L`**（Mac）または **`Ctrl + L`**（Windows）でCursorチャットを開く
4. 選択した内容が自動的にチャットに追加される
5. AIに質問を入力して送信

##### 方法2: 必要な部分だけ選択

1. マウスでエラーメッセージの部分だけを選択
2. 右クリック → 「Copy」または **`Cmd + C` / `Ctrl + C`**
3. **`Cmd + L` / `Ctrl + L`** でチャットを開く
4. 「Add to Chat」または直接ペーストして質問

### なぜ`clear`が重要なのか

古いエラーが残っていると：
- AIが古いエラーと新しいエラーを区別できない
- すでに解決済みの問題を指摘される
- 正しい解決策にたどり着くまで時間がかかる

**常に最新のエラーだけをAIに見せる**ことで、的確な解決策を得られます。

### よくある流れ（バグ修正時）

1. バグ発見
2. **`Ctrl + C`** でサーバー停止
3. **`clear`** でターミナルクリア
4. **`npm run dev`** で再起動
5. エラー再現を確認
6. **`Cmd/Ctrl + A`** → **`Cmd/Ctrl + L`** → 「Add to Chat」
7. AIに「このエラーを修正してください」と質問
8. AIの提案を実装
9. 再度ステップ2〜6で確認

---

## トラブルシューティング

### よくあるエラーと解決策

#### 1. `command not found: npm`
- **原因**: Node.jsがインストールされていない
- **解決策**:
  - Node.jsをインストール
  - ターミナルを再起動

#### 2. `npm ERR! code ENOENT`
- **原因**: `package.json`がないディレクトリで実行している
- **解決策**:
  - `pwd`で現在地を確認
  - `cd`でプロジェクトルートに移動
  - `ls`で`package.json`があることを確認

#### 3. `Permission denied`（権限エラー）
- **原因**: 管理者権限が必要な操作
- **解決策**:
  - `sudo`をコマンドの前に付ける（慎重に！）
  - 例: `sudo npm install -g パッケージ名`

#### 4. `Port 3000 is already in use`
- **原因**: ポート3000が既に使われている
- **解決策**:
  - 他の開発サーバーを停止
  - または別のポートを使用: `PORT=3001 npm run dev`

#### 5. Gitで`fatal: not a git repository`
- **原因**: Gitリポジトリ外でGitコマンドを実行
- **解決策**:
  - プロジェクトのルートディレクトリに移動
  - または`git init`でリポジトリを初期化

### よく使うトラブル解決コマンド

```bash
# node_modulesとpackage-lock.jsonを削除して再インストール
rm -rf node_modules package-lock.json
npm install

# キャッシュをクリア
npm cache clean --force

# プロセスを強制終了（ポートが使われている場合）
# MacOS/Linux
lsof -ti:3000 | xargs kill -9
# Windows
netstat -ano | findstr :3000
taskkill /PID <PID番号> /F
```

---

## Tips

### 便利なショートカット

- `Tab`: コマンドやファイル名の補完
- `↑/↓`: コマンド履歴を表示
- `Ctrl + C`: 実行中のコマンドを停止
- `Ctrl + L`: 画面をクリア
- `Ctrl + A`: 行頭に移動
- `Ctrl + E`: 行末に移動

### エイリアス（ショートカット設定）

よく使うコマンドを短縮できます（`.bashrc`や`.zshrc`に追加）：

```bash
alias gs='git status'
alias ga='git add .'
alias gc='git commit -m'
alias gp='git push'
alias dev='npm run dev'
```

---

## 参考リンク
- [VibeCoder育成プログラム - 環境構築ガイド](../../研修内容/)
