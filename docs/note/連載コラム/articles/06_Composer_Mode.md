# #6 Composer Mode - プロジェクト全体を制するAI

**前回**、ChatGPTのようなチャット型AI（Level 1-2）では単発の会話文脈しか扱えないのに対し、CursorのようなIDE型AI（Level 3）はプロジェクト全体のコンテクストを理解できることを学びました。

でも、「プロジェクト全体のコンテクスト」って、具体的にどういうことでしょうか？

あなたは今まで、**1つのファイルを修正したら、関連する5つのファイルも修正しなければならず、しかもその5つのファイルすべてで整合性を保たなければならない**、という地獄を経験したことはありますか？

例えば、ToDo管理アプリに「優先度フィルター機能」を追加する場合：

修正が必要なファイル:
- `components/TodoList.tsx`（表示ロジック）
- `types/todo.ts`（型定義）
- `lib/api.ts`（APIロジック）
- `components/FilterBar.tsx`（新規コンポーネント）
- `pages/index.tsx`（ページ統合）

ChatGPTでの作業:
1. 1つずつコピペ→修正指示→コピペ→次のファイル...（5回繰り返し）
2. **問題**: 4つ目のファイルを修正中に、1つ目のファイルとの整合性が崩れることに気づく
3. また1つ目に戻る...
4. **無限ループ**

**「一文字でも間違えればエラー」**なのに、人間が手動で5ファイルの整合性を保つのは不可能です。

**Composer Modeは、この地獄を終わらせます。**

---

## Composer Modeとは何か

**Composer Mode**は、Cursorの革新的な機能です。

定義: **複数ファイルを同時に選択し、プロジェクト全体のコンテクストを理解した上で、整合性を保ちながら同時編集する機能**

---

### 従来の方法との比較

#### ChatGPT（Level 1-2）:
- 1ファイルずつコピペ→修正→次のファイル
- プロジェクト全体が見えない
- 整合性は人間が手動で管理

#### Cursor Chat（Level 3、単一ファイル）:
- 1ファイルをその場で編集
- プロジェクト全体は理解しているが、1ファイルのみ編集

#### Composer Mode（Level 3 + Multi-File）:
- 複数ファイルを同時に、プロジェクト全体の整合性を保ちながら編集
- **整合性を自動で維持**

---

### 技術的背景

Composer Modeは、3つの技術で支えられています：

1. **Codebase Indexing**: プロジェクト全体を理解
2. **Multi-Agents**: 複数ファイルを並行処理
3. **整合性チェック機能**: 型定義・関数シグネチャ・import文などを自動で一致させる

---

### オーケストラの指揮者

**メタファー**で理解しましょう。

- **ChatGPT** = 1人の演奏者に1つずつ指示を出す（バラバラに演奏）
- **Composer Mode** = オーケストラ全体を見渡し、すべての演奏者が調和するよう指揮する

指揮者（あなた）は、楽器を弾きません。

でも、全体を統率します。

**これがContext Control Technologyです。**

---

## 整合性維持の具体例

では、実際にComposer Modeで「優先度フィルター機能」を追加してみましょう。

### Composer Modeでの作業フロー

#### 1. Composer Modeを起動
`Cmd+I`（Mac）または`Ctrl+I`（Windows）

#### 2. 関連する5ファイルを選択（または自動検出）

#### 3. 1つの指示を出す
「優先度フィルター機能を追加してください。高・中・低の3段階で、ボタンクリックでフィルタリングできるようにしてください」

#### 4. AIがプロジェクト全体を理解した上で、5ファイルを同時に編集

---

### 整合性の自動維持（具体例）

#### `types/todo.ts`
```typescript
type Priority = 'high' | 'medium' | 'low';

interface Todo {
  id: string;
  title: string;
  priority: Priority; // ← 追加
}
```

#### `components/TodoList.tsx`
```typescript
// 型定義が自動で更新される
const TodoList: React.FC<{ todos: Todo[] }> = ({ todos }) => {
  // ...
}
```

#### `lib/api.ts`
```typescript
// フィルタリング関数が自動で追加される
export function filterByPriority(todos: Todo[], priority: Priority) {
  return todos.filter(todo => todo.priority === priority);
}
```

#### `components/FilterBar.tsx`
```typescript
// 新規コンポーネントが自動で作成される
export const FilterBar: React.FC = () => {
  // ボタンUI + フィルタリングロジック
}
```

#### `pages/index.tsx`
```typescript
import { FilterBar } from '../components/FilterBar'; // ← 自動でimport

export default function Home() {
  return (
    <div>
      <FilterBar /> {/* ← 自動で配置 */}
      <TodoList />
    </div>
  );
}
```

---

**型定義、関数シグネチャ、import文、コンポーネント間のプロパティ受け渡し、すべてが自動で整合性を保たれます。**

---

### 人間が手動でやった場合のミス例

もし人間が手動で5ファイルを編集したら：

1. `types/todo.ts`で`priority: 'high' | 'medium' | 'low'`と定義
2. でも`components/TodoList.tsx`で`priority: 'High' | 'Medium' | 'Low'`（**大文字**）と書いてしまう
3. **TypeScriptエラー発生**

**「一文字でも間違えればエラー」の典型例です。**

**Composer Modeの威力**: こうしたミスを一切起こさない整合性維持

---

## Context Control訓練としての価値

### 180万円の価値

武蔵野大学EMC企業向けプログラム（180万円/人）の目標:

**Context Control Technology = 言語化力 + AI使いこなし + ドキュメント管理**

訓練素材: **プログラミング**（★★★★★）

理由: **「一文字でも間違えればエラー」という厳しさが、言語化力を極限まで鍛える**

---

### Composer Modeとの関係

プロジェクト全体の整合性を保つには、**「何を実現したいか」を正確に言語化する必要があります。**

❌ **曖昧な指示**:
「フィルター機能を追加して」

→ AIは迷います。どんなフィルター？どんなUI？

✅ **正確な指示**:
「優先度フィルター機能を追加してください。高・中・低の3段階で、ボタンクリックでフィルタリングできるようにしてください」

→ AIは正確に実装します。

**この「正確な言語化」こそが、Context Control Technologyの核心です。**

---

### 他のタスクとの比較

| タスク | 難易度 | 曖昧さの許容度 |
|--------|--------|---------------|
| メール文章 | ★☆☆☆☆ | 多少曖昧でも伝わる |
| プレゼン資料 | ★★☆☆☆ | レイアウトが少し崩れても問題ない |
| 事業計画書 | ★★★☆☆ | 数字が多少ずれても修正可能 |
| プログラム開発 | ★★★★★ | **一文字でも間違えればエラー** |

**だからこそ、プログラミングは訓練素材として最適なのです。**

---

## Composer Modeを使ってみよう

### ステップバイステップガイド

#### 1. Cursorをインストール
無料プランでOK（月500回までのAI操作）

#### 2. 任意のプロジェクトを開く
既存プロジェクトでも、新規プロジェクトでも可

#### 3. Composer Modeを起動
`Cmd+I`（Mac）または`Ctrl+I`（Windows）

#### 4. 編集したいファイルを選択
複数選択可（または自動検出に任せる）

#### 5. 1つの指示を出す
例: 「ユーザー名表示機能を追加してください」

#### 6. AIが複数ファイルを同時編集

#### 7. 変更内容を確認し、Accept

---

### 初心者向けアドバイス

- **最初は2-3ファイルから始める**
- **指示は具体的に**（「どうなってほしいか」を明確に）
- **変更内容は必ず確認してから Accept**（AIも間違えることがある）

---

### 無料プランの制限

月500回までのAI操作（Composer Modeも含む）

**十分に試せる回数なので、まずは無料で体験を。**

---

## まとめ：プロジェクト全体を制する感覚

**Composer Modeは、プロジェクト全体の整合性を保ちながら複数ファイルを同時編集する革新的機能です。**

**「一文字でも間違えればエラー」という厳しさに対応できる唯一のAI実装方法です。**

**Context Control Technology（180万円価値）の訓練として、プログラミングが最適である理由です。**

---

あなたがもしChatGPTで「コピペ地獄」を経験しているなら、Composer Modeは人生を変えます。

**「プロジェクト全体を制する」という感覚を、ぜひ体験してください。**

---

## 次回予告

しかし、Composer Modeを最大限に活用するには、もう1つの革命が必要です。

それは**「音声入力」**です。

なぜ音声入力がContext Controlに不可欠なのか？

**次回 #7「Text is KING - 音声入力がもたらす革命」**で解説します。

---

**Vibe Coder Bootcampでは、Composer Modeの実践的な使い方を、実際にアプリを作りながら学べます。**

詳しくは: https://vibecoderbootcamp.com

**参考**:
- [振り返るとCursorはめちゃくちゃ早かった](https://note.com/rsensui/n/n5aa6e6289242)
- [意味ないからLLMに怒るな、問い詰めるな](https://note.com/rsensui/n/n41598ed615ae)
